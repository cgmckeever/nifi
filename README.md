# Reference
Terraform with Ansible to create/manage a fullstack AWS-based secure Apache NiFi cluster.

# Deploy
```
# Set vars in .tfvars file - mgmt_cidr is granted WebUI access.
vi tf-nifi.tfvars

# Initialize terraform
terraform init

# Apply terraform
terraform apply -var-file="tf-nifi.tfvars"

# Wait for SSM Ansible Playbook, watch:
https://console.aws.amazon.com/systems-manager/state-manager
```

# WebUI Access
WebUI access is permitted to the mgmt_cidr defined in tf-nifi.tfvars. Authentication requires the admin password-protected certificate generated by the Ansible playbook:
- Gather keystore.pkcs12 and tls.json from either:
  - An EC2 instance (via ssh) under /mnt/tf/nifi/efs/admin-certificates/, or
  - S3 under <bucket_name defined in tf-nifi.tfvars>/admin-certificates/
- Import keystore.pkcs12 as certificate into Web Browser
  - Use tls.json's keyStorePassword value when prompted for password

# Todo
- Autoscaling (down)

# Notes
- AMI is [Latest Official RHEL7](https://access.redhat.com/solutions/15356)
